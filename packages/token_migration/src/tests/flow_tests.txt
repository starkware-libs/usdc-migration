Basic flows
3. end to end: swaps, send to L1, swap (and fail), get money, swap and aucceed
4. swap/reverse swap fail (not enough money in contract), gets money from reverse swap/swap, try again and succeed

Send to L1
1. Sends all legacy to L1 (function), then swap should fail

Set threshold
1. start with the large batch size, then change to the small batch size, check send to L1

Approve to owner
1. Withdraw all/part of legacy/new

Upgrade
1. some swaps, send to L1, upgrade, cant swap/do anything

Set allow new to legacy swap
1. Disable, check that legacy -> new still works.
