Basic flows
1. User swap threshold + x legacy, then swap x new back to legacy
2. User swap and fail (not enough balance), then contract gets more new tokens from reverse swap, swap again and succeed.
3. reverse swap and fail, gets money, reverse swap and succeed
4. swap without approve fail, swap without balance fail, then approve then swap
5. User just transfer money, then swap
6. user swap twice 

Send to L1
1. A small swap triggers the threshold
2. Remainder after threshold
3. More than one send to l1 in one tx
4. Sends not above the MAX
5. Sends all legacy to L1 (function), then swap should fail

Set threshold
1. send to L1 after decrease threshold
2. not send to L1 in set threshold if not needed
3. start with the large batch size, then change to the small batch size, check send to L1

Approve to owner
1. Withdraw all/part of legacy/new

Upgrade
1. some swaps, send to L1, upgrade, cant swap/do anything

Set allow new to legacy swap
1. Disable, check that legacy -> new still works.
